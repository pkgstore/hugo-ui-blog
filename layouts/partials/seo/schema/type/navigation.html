{{ $menu := (site.Menus.main) }}
{{ $data := (newScratch) }}

{{ ($data.Add "itemListElement" (slice)) }}

{{ range ($menu) }}
    {{ ($data.Add "itemListElement" (dict
    "@type" "SiteNavigationElement"
    "position" (.Weight)
    "name" (.Name)
    "url" ((.URL) | absLangURL)
    )) }}
{{ end }}

{{ $itemList := (dict
"@context" "https://schema.org"
"@type" "ItemList"
"itemListElement" ($data.Get "itemListElement")
) }}

<script type="application/ld+json">{{ ((($itemList) | jsonify) | safeJS) }}</script>
