{{ $image := (index (.Params.images) 0) }}
{{ $data := (newScratch) }}

{{ ($data.Add "tags" (slice)) }}
{{ range (.GetTerms "tags") }}{{ ($data.Add "tags" (.Title)) }}{{ end }}

{{ $mainEntityOfPage := (dict
"@type" "WebPage"
"@id" (.Permalink)
) }}

{{ $article := (dict
"@context" "https://schema.org"
"@type" "Article"
"mainEntityOfPage" ($mainEntityOfPage)
"headline" ((.Title) | truncate 110)
"description" ((partial "seo/schema/function/description" .) | plainify)
"url" (.Permalink)
"image" ($image)
"author" (partial "seo/schema/function/author" .)
"inLanguage" (.Language.LanguageCode)
"wordCount" (.WordCount)
"datePublished" (partial "seo/schema/function/date.published" .)
"dateCreated" (partial "seo/schema/function/date.created" .)
"dateModified" (partial "seo/schema/function/date.modified" .)
"keywords" (delimit (($data.Get "tags") | default (slice)) ", ")
"publisher" (partial "seo/schema/function/organization" .)
) }}

<script type="application/ld+json">{{ ((($article) | jsonify) | safeJS) }}</script>
