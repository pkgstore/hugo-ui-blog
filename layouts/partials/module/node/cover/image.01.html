{{ $cfg := (site.Params.node.cover) }}

{{ $width := ($cfg.md.width) }}{{ $height := ($cfg.md.height) }}
{{ $crop := ((.Params.cover.crop) | default ($cfg.image.crop)) }}
{{ $fit := ((.Params.cover.fit) | default ($cfg.image.fit)) }}
{{ $src := ((index (.Params.images) 0) | default ($cfg.image.placeholder)) }}

<a title="{{ ((.Title) | plainify) }}" class="d-block rounded overflow-hidden" href="{{ (.RelPermalink) }}">
  <img class="img-fluid"
       src="{{ ($src) }}?crop={{ ($crop) }}&amp;w={{ ($width) }}&amp;h={{ ($height) }}&amp;fit={{ ($fit) }}&amp;auto=compress,format"
       width="{{ ($width) }}" height="{{ ($height) }}"
       alt="{{ ((.Title) | plainify) }}" loading="lazy"/>
</a>
