{{ $cfg := (site.Params.node.cover.image) }}

{{ $width := ($cfg.md.width) }}{{ $height := ($cfg.md.height) }}
{{ $crop := ((.Params.cover.crop) | default ($cfg.crop)) }}
{{ $fit := ((.Params.cover.fit) | default ($cfg.fit)) }}
{{ $src := ((index (.Params.images) 0) | default ($cfg.placeholder)) }}

<a title="{{ ((.Title) | htmlEscape) }}" class="d-block" href="{{ (.RelPermalink) }}">
  <img class="d-block rounded"
       src="{{ ($src) }}?crop={{ ($crop) }}&amp;w={{ ($width) }}&amp;h={{ ($height) }}&amp;fit={{ ($fit) }}&amp;auto=compress,format"
       width="{{ ($width) }}" height="{{ ($height) }}"
       alt="{{ ((.Title) | htmlEscape) }}"/>
</a>
