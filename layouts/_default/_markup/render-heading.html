{{- $level := (.Level) -}}
{{- $anchor := ((.Anchor) | safeURL) -}}
{{- $text := ((.Text) | safeHTML) -}}

{{- if (.Page.Params.toc) -}}
  <h{{ ($level) }} id="{{ ($anchor) }}">
    <a class="link-body-emphasis" href="#{{ ($anchor) }}">{{ ($text) }}</a>
  </h{{ ($level) }}>
{{- else -}}
  <h{{ ($level) }}>{{ ($text) }}</h{{ ($level) }}>
{{- end -}}
{{- /* This comment removes trailing newlines. */ -}}
