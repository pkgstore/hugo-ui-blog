{{- /*
DESCRIPTION:
  This shortcode allows you to create a simulation of an OS terminal window.

SYNTAX:
  ```terminal {os="[linux|windows]",mode="root"}
  <CODE>
  ```

EXAMPLE:
  ```terminal {os="windows"}
  cd D:\Documents
  ```

EXAMPLE:
  ```terminal {os="windows",mode="root"}
  Dism /Get-ImageInfo /ImageFile:"C:\BuildFarm\WIM\install.wim"
  ```

EXAMPLE:
  ```terminal {os="linux"}
  bash favicon.sh png
  ```

EXAMPLE:
  ```terminal {os="linux",mode="root"}
  dd if=image.iso of=/dev/sdc bs=4M oflag=direct status=progress; sync
  ```
*/ -}}

{{ $attr := (.Attributes) }}
{{ $type := ((.Type) | default "text") }}
{{ $inner := (.Inner) }}

{{ $cp := (printf "clipboard-%s" (delimit (shuffle (seq 999)) "" | md5)) }}

<div class="shortcode shortcode-codeblock shortcode-codeblock-{{ ($type) }}
{{ with ($attr.os) }}shortcode-codeblock-{{ ($type) }}-{{ . }}{{ end }}
{{ with ($attr.os) }}shortcode-codeblock-{{ ($type) }}-{{ . }}{{ end }}{{ with ($attr.mode) }}-{{ . }}{{ end }}">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 {{ if (eq ($attr.mode) "root") }}text-danger{{ end }}">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">{{ (i18n "terminal") }}</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='{{ (i18n "copy") }}'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#{{ ($cp) }}"
                 role="button" aria-label='{{ (i18n "copy") }}'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="{{ ($cp) }}">{{ (highlight ($inner) ($type)) }}</div>
  </div>
</div>
